
<!DOCTYPE html>
<html lang="en"><head>

    <meta charset="UTF-8">
    <meta name="robots" content="noodp, noydir">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>WordPress Update Script Documentation - Bluehost</title>
    <script>
    var provinfo={"cdn":"https://bluehost-cdn.com","code":"bh","domain":"bluehost.com","name":"Bluehost","phone":["888-401-4678","801-765-9400"]};
    provinfo.cdn=window.location.protocol+provinfo.cdn;
    </script>
    <!--[if lt IE 9]><script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script><script>provinfo.lt_ie9 = 1;</script><![endif]-->
    <!--[if lte IE 9]><script>provinfo.lte_ie9 = 1;</script><![endif]-->
    <link rel="shortcut icon" href="https://bluehost-cdn.com/media/shared/general/_bh/favicon.ico">
    <link  rel="icon" type="image/x-icon" href="https://bluehost-cdn.com/media/shared/general/_bh/favicon.ico">
    <meta name="description" content="Bluehost - 24/7 support. free 1-click installs for blogs, e-commerce, and more. get a website with a free domain name and superior speed.">
    <meta name="keywords" content="web host,web hosting,domains,free domain name,php,perl,ruby,front page,domain registration,ecommerce,business,web site,website,hosting,site builder,web site builder,seo,blog">
    <link rel="stylesheet" href="https://bluehost-cdn.com/media/shared/general/_bh/brand.css">
    <link rel="stylesheet" href="https://bluehost-cdn.com/media/shared/general/_bh/widgets.css">
    <link rel="stylesheet" href="https://bluehost-cdn.com/media/shared/general/admin.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="https://bluehost-cdn.com/media/shared/general/jquery/1.11.2/jquery.min.js"><\/script>');</script>
    <link rel='stylesheet' id='bh2-style-css'  href='https://www.bluehost.com/blog/wp-content/themes/bh2/style.css?ver=4.4.2' type='text/css' media='all' />
    <style type="text/css">
    #container{
        padding: 6em 0 1em;
    }
    #footer{
        min-height: 0px;
    }
    </style>
</head>
<!--[if lt IE 8]><body class=" no_js ie7 lt_ie9 lte_ie9 lte_ie10"><![endif]-->
<!--[if IE 8]><body class=" no_js ie8 lt_ie9 lte_ie9 lte_ie10"><![endif]-->
<!--[if IE 9]><body class=" no_js ie9 lt_ie10 lte_ie10"><![endif]-->
<!--[if IE 10]><body class=" no_js ie10 lte_ie10"><![endif]-->
<!--[if (gt IE 10)|!(IE)]><!-->
<body class=" no_js">
<!--<![endif]-->

<!-- Google Tag Manager -->
<script>dataLayer = [{"affiliate":"wp","currency":"USD","pageId":"www:wrapper","userType":"Employee","vpv":"/bluehost/wrapper.html"}];</script>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WS625V&affiliate=wp&currency=USD&pageId=www%3Awrapper&userType=Employee&vpv=%2Fbluehost%2Fwrapper.html&no-js=1" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-WS625V');</script>
<!-- End Google Tag Manager -->

<script>(function() {var d=document.body;d.className=d.className.replace('no_js','js_on');})();</script>
<header id="header">
    <div class="wrapper">
        <a href="https://www.bluehost.com" tabindex="100" class="logo"><img src="https://bluehost-cdn.com/media/branding/_bh/logo.png" alt="bluehost - professional web hosting" width="117" height="19"></a>
        <nav class="main_nav">
            <ul class="clear">
                <li class="tab phone_tab">
                    <a style="padding:0 10px;" href="http://bluehost.github.io/">Bluehost Open Source Initiative</a>
                </li>
            </ul>

        </nav>
    </div>
    <div class="end"></div>
</header>
<div id="container" class="cover_wrap">
    <div class="content_wrap clear">
        <!-- end bluehost_header -->
<div class="content-area" id="primary">
                <main role="main" class="site-main" id="main" style="border-top:0px;">


<article class="post type-post status-publish">
    <!-- <img width="1200" height="628" alt="mobilemania" class="attachment-full size-full wp-post-image" src="http://www.bluehost.com/blog/wp-content/uploads/2016/02/mobilemania.png"> -->
    <header class="entry-header">
        <h1 class="entry-title">WP Tools</h1>
    </header>

    <div class="entry-content">



<h1><a id="SYNOPSIS_4"></a>SYNOPSIS</h1>
<pre><code># simple installation from CPAN
cpanm App::WordPressTools

# view usage information
wp-tools --help

# common usage
wp-tools upgrade|backup|restore OPTIONS...
</code></pre>
<h1><a id="DESCRIPTION_15"></a>DESCRIPTION</h1>
<p>WordPress Tools is a set of tools that allow you to backup, restore, and upgrade WordPress sites. The tools are
especially useful for upgrading very outdated sites and for scripting the backing up and upgrading of <strong>many</strong> sites.</p>
<p>WordPress Tools was built to make the Internet more secure. A huge number of websites on the Internet use
<a href="https://wordpress.org/">WordPress</a>, because it’s awesome, but a large portion of those sites do not run the latest
version of WordPress which makes them susceptible to hacking. WordPress Tools can be used to get those sites up-to-date
again, and that makes the whole Internet more secure.</p>
<p>The code has been used in production and has already upgraded over two million WordPress sites, but it has little
real-world testing outside of Linux at this point so your mileage may vary if you have a different operating system.
Stay tuned as we add support for more platforms, and please contribute if you feel like it.</p>
<p>The command-line program also has a lot of options for managing server load, so you can upgrade your sites without
killing your server.</p>
<h1><a id="INSTALLATION_32"></a>INSTALLATION</h1>
<p>There are several ways to install WordPress Tools to your system.</p>
<p>Make sure you have <a href="http://wp-cli.org/">WP-CLI</a> and the other <a href="#DEPENDENCIES_71">DEPENDENCIES</a> installed.</p>
<h2><a id="Using_cpanm_36"></a>Using cpanm</h2>
<p>The easiest way to install WordPress Tools is using <a href="https://metacpan.org/pod/cpanm">cpanm</a>. If you have a local perl (plenv, perlbrew, etc.), you can
just do:</p>
<pre><code>cpanm App::WordPressTools
</code></pre>
<p>to install the <code>wp-tools</code> executable and its dependencies. The executable will be installed to your perl’s bin path,
like <code>~/perl5/perlbrew/bin/wp-tools</code>.</p>
<p>If you’re installing to your system perl, you can do:</p>
<pre><code>cpanm --sudo App::WordPressTools
</code></pre>
<p>to install the <code>wp-tools</code> executable to a system directory, like <code>/usr/local/bin/wp-tools</code> (depending on your perl).</p>
<h2><a id="Downloading_just_the_executable_52"></a>Downloading just the executable</h2>
<p>If you want to handle the Perl dependencies yourself and just want the <code>wp-tools</code> executable, you can do:</p>
<pre><code>curl -OL https://raw.githubusercontent.com/bluehost/wp-tools/solo/wp-tools
chmod +x wp-tools
</code></pre>
<p>to download the <code>wp-tools</code> executable to your current directory.</p>
<h2><a id="For_developers_61"></a>For developers</h2>
<p>If you’re a developer and want to hack on the source, clone the repository and pull the dependencies:</p>
<pre><code>git clone https://github.com/bluehost/wp-tools.git
cd wp-tools
cpanm Dist::Zilla
dzil authordeps --missing | cpanm
dzil listdeps --author --develop --missing | cpanm
</code></pre>
<h1><a id="DEPENDENCIES_71"></a>DEPENDENCIES</h1>
<p>WordPress Tools requires these other programs and libraries in order to do its work. You probably have most of these on
your system already, and the cpanm method of installing wp-tools will handle the Perl module dependencies for you.</p>
<ul>
<li><a href="http://wp-cli.org/">WP-CLI</a></li>
<li><a href="https://www.gnu.org/software/coreutils/">GNU Coreutils</a></li>
<li><a href="https://www.gnu.org/software/tar/">GNU Tar</a></li>
<li>awk</li>
<li>grep</li>
<li>mysql (MySQL server client)</li>
<li>procps</li>
<li>Various Perl modules (see the distributed <code>cpanfile</code> file for a list)</li>
</ul>
<h1><a id="OPTIONS_82"></a>OPTIONS</h1>
<ul>
<li>
<p>–help</p>
<p>Show usage information and exit.</p>
</li>
<li>
<p>–force</p>
<p>If there are any resource limits in effect, ignore them and do the command anyway.</p>
</li>
<li>
<p>–max-count=num</p>
<p>Delete the oldest backups, keeping the number provided (default: 5).</p>
</li>
<li>
<p>–max-dproc=num</p>
<p>Refuse to execute if the maximum number of defunct processes on the system exceeds this number (default: 100).</p>
</li>
<li>
<p>–max-load=num</p>
<p>Refuse to execute if the load average exceeds this number (default: 200).</p>
</li>
<li>
<p>–max-size=num</p>
<p>Refuse to back up a site if its uncompressed size on disk exceeds this number of bytes (default: 5368709120).</p>
</li>
<li>
<p>–max-run=num</p>
<p>Do not allow more than this number of concurrent system-wide executions of the script (default: 50).</p>
</li>
<li>
<p>–min-freemem=num</p>
<p>Refuse to execute if free memory has dropped below this number of bytes (default: 1048576).</p>
</li>
<li>
<p>–wp-cli=path</p>
<p>If your <code>wp-cli</code> program has a different name than <code>wp</code> or is not in your <code>$PATH</code>, you can specify the command to be
used to call wp-cli.</p>
</li>
<li>
<p>–username=name</p>
<p>If you run wp-tools as a root user, it will drop permissions to the specified user and <code>chdir</code> to their home directory.</p>
</li>
</ul>
<h1><a id="COMMANDS_125"></a>COMMANDS</h1>
<ul>
<li>
<p>upgrade</p>
<p>The upgrade command will upgrade your WordPress core, themes, and plugins to the latest version available. It takes
a full backup prior to the update. After the update, wp-tools will do a quick check to try to determine that nothing
broke on your site. If any failures are detected, wp-tools will automatically restore to the backup taken prior to
update.</p>
</li>
<li>
<p>backup</p>
<p>The backup command will create a full backup, including database, of your WordPress installation as long as it is under
the --max-size limit (pre-compression).</p>
</li>
<li>
<p>restore</p>
<p>The restore command will restore a WordPress installation from a backup taken using the backup command.</p>
</li>
</ul>
<h1><a id="EXAMPLES_143"></a>EXAMPLES</h1>
<pre><code># upgrade a site
wp-tools upgrade --path=public_html/myblog \
                 --backupdir=myblog_backups

# upgrade only plugins and themes
wp-tools upgrade --path=public_html/myblog  \
                 --backupdir=myblog_backups \
                 --components=plugin,theme

# backup a site
wp-tools backup --path=public_html/mysite \
                --backupdir=backups/mysite

# restore a site to a previous state
wp-tools restore --backupfile=backups/mysite/wp_backup1428524082.tar.gz
</code></pre>
<h1><a id="BUGS_161"></a>BUGS</h1>
<p>Currently, wp-tools tries very hard to run with your <code>$HOME</code> as the current working directory. It will <code>chdir</code> there
before executing its command, and it does <strong>NOT</strong> translate relative paths. This means that if you run wp-tools from
outside of your home directory with a relative path, your paths won’t be found. This is a temporary limitation that will
be fixed soon.</p>
<h1><a id="AUTHORS_168"></a>AUTHORS</h1>
<ul>
<li>Seth Johnson &lt;sj@bluehost.com&gt;</li>
<li>Charles McGarvey &lt;cmcgarvey@bluehost.com&gt;</li>
<li>Garth Mortensen &lt;gmortensen@bluehost.com&gt;</li>
</ul>
<h1><a id="COPYRIGHT_AND_LICENSE_174"></a>COPYRIGHT AND LICENSE</h1>
<p>This software is copyright © 2016 by Bluehost Inc.</p>
<p>This is free software, licensed under:</p>
<p>The GNU General Public License, Version 2, June 1991</p>




        </main>
    </div>


<div id="secondary" class="widget-area" role="complementary">
    <div class="main-widget-blue">
        <div class="top">
            <p>Access code on Github.</p>
            <a href="https://github.com/bluehost/wp-tools/">View Code</a>
            <a href="https://github.com/bluehost/wp-tools/archive/master.zip">Download</a>
        </div>
        <div class="bottom">
            <p>Learn more about Bluehost's commitment to Open Source projects.</p>
            <a href="https://www.bluehost.com/opensource">Learn More</a>
            <p>Optimized Hosting for WordPress. More power for WordPress users</p>
            <a href="http://www.bluehost.com/track/socialadsregular/social/githublp/?page=managed-wordpress-hosting">Get Started</a>
        </div>
    </div>

</div>
 <div class="clear"></div>


    </div>
</div>
    <footer id="footer">
        <a name="footer"></a>
        <div class="social_media">
            <div class="wrapper">
                <a href="https://www.facebook.com/bluehost" class="social_icon facebook" target="_blank" alt="facebook">
                    <img src="https://bluehost-cdn.com/media/shared/general/icons/facebook.svg" data-color="white" class="svg_icon no_hover inverse">
                </a>
                <a href="https://twitter.com/bluehost" class="social_icon twitter" target="_blank" alt="twitter">
                    <img src="https://bluehost-cdn.com/media/shared/general/icons/twitter.svg" data-color="white" class="svg_icon no_hover inverse">
                </a>
                <a href="https://plus.google.com/+bluehost/" class="social_icon google" target="_blank" alt="google">
                    <img src="https://bluehost-cdn.com/media/shared/general/icons/google.svg" data-color="white" class="svg_icon no_hover inverse">
                </a>
                <a href="https://www.youtube.com/user/bluehost" class="social_icon youtube" target="_blank" alt="youtube">
                    <img src="https://bluehost-cdn.com/media/shared/general/icons/youtube.svg" data-color="white" class="svg_icon no_hover inverse">
                </a>
                <a href="https://www.linkedin.com/company/bluehost-com" class="social_icon linkedin" target="_blank" alt="linkedin">
                    <img src="https://bluehost-cdn.com/media/shared/general/icons/linkedin.svg" data-color="white" class="svg_icon no_hover inverse">
                </a>
                <a href="https://www.pinterest.com/bluehost/" class="social_icon pinterest" target="_blank" alt="pinterest">
                    <img src="https://bluehost-cdn.com/media/shared/general/icons/pinterest.svg" data-color="white" class="svg_icon no_hover inverse">
                </a>
                <a href="https://instagram.com/bluehost" class="social_icon instagram" target="_blank" alt="instagram">
                    <img src="https://bluehost-cdn.com/media/shared/general/icons/instagram.svg" data-color="white" class="svg_icon no_hover inverse">
                </a>
                <span class="copyright">&copy; 2002-2016 Bluehost Inc. All rights reserved.
                </span>
            </div>
        </div>
        <script src="https://bluehost-cdn.com/media/shared/general/cookies.js"></script>
        <script src="https://bluehost-cdn.com/media/shared/general/common.js"></script>
    </footer>

<script>window.jQuery || document.write('<script src="https://bluehost-cdn.com/media/shared/general/jquery/1.11.2/jquery.min.js"><\/script>');</script>

</body>
</html>
